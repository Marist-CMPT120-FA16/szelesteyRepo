<!DOCTYPE html>
<!--
Clayton Szelestey
9/27/16
Project 2 - Game v0.2
-->
<html>
<head>
<meta charset="UTF-8">
      <title>
         Little Dungeon
      </title>
      
      <script type="text/javascript">
		 var xcoor = 1;
		 var ycoor = 1;
		 var ndoor = 1;
		 var sdoor = 1;
		 var edoor = 1;
		 var wdoor = 1;
		 var key = 0;
		 var keyRoom12 = true;
		 var lock10w = true;
		 var score = 0;
		 var firstTime = [0,1,2,3,4,5,6,7,8];
		 var sleeping_grue=false;
		 var direction = "n";
		 for(x=0;x<9;x++)
			firstTime[x]=1;
		 // little map of the game below
		 // 00|10|20
		 // 01|11|21
		 // 02|12|22
		 function shutdown(){
			document.getElementById("btnN").disabled= true;
			document.getElementById("btnS").disabled= true;
			document.getElementById("btnE").disabled= true;
			document.getElementById("btnW").disabled= true;
		 }
		 function message(mess){
			var targetTextArea = document.getElementById("taMain");
			targetTextArea.value= mess;
		 }
		 
         function btnN_click() {
			direction = "n";
			if(ycoor>0&&ndoor==1)
				ycoor--;
			else if(ndoor==2&&key>0){
				roomCheck();
				ndoor--;
				ycoor--;
				key--;
				alert("You used a key!");
			}
			else if(ndoor==2){
				message("The door is locked.")
				return(0);
			} 
			else if(ndoor==0){
				message("You run into a wall.")
				if(sleeping_grue==true){
					message("You run into a wall and make a crashing sound. You woke the grue. The grue EATS YOU! Game over.")
					shutdown()
				}
				return(0);
			}
			roomCheck();
         }
		 
		 function btnS_click() {
			direction = "s";
			if(ycoor<2&&sdoor==1)
				ycoor++;
			else if(sdoor==2&&key>0){
				roomCheck();
				sdoor--;
				ycoor++;
				key--;
				alert("You used a key!");
			}
			else if(sdoor==2){
				message("The door is locked.")
				return(0);
			}
			else if(sdoor==0){
				message("You run into a wall.")
				if(sleeping_grue==true){
					message("You run into a wall and make a crashing sound. You woke the grue. The grue EATS YOU! Game over.")
					shutdown()
				}
				return(0);
			}
			roomCheck();
         }
		 
		 function btnE_click() {
			direction = "e";
			if(xcoor<2&&edoor==1)
				xcoor++;
			else if(edoor==2&&key>0){
				roomCheck();
				edoor--;
				xcoor++;
				key--;
				alert("You used a key!");
			}
			else if(edoor==2){
				message("The door is locked.")
				return(0);
			} 
			else if(edoor==0){
				message("You run into a wall.")
				if(sleeping_grue==true){
					message("You run into a wall and make a crashing sound. You woke the grue. The grue EATS YOU! Game over.")
					shutdown()
				}
				return(0);
			}
			roomCheck();
         }
		 
		 function btnW_click() {
			direction = "w";
			if(xcoor>0&&wdoor==1)
				xcoor--;
			else if(wdoor==2&&key>0){
				roomCheck();
				wdoor--;
				xcoor--;
				key--;
				alert("You used a key!");
			}
			else if(wdoor==2){
				message("The door is locked.")
				return(0);
			} 
			else if(wdoor==0){
				message("You run into a wall.")
				if(sleeping_grue==true){
					message("You run into a wall and make a crashing sound. You woke the grue. The grue EATS YOU! Game over.")
					shutdown()
				}
				return(0);
			}
			roomCheck();
         }
		 
		 function roomCheck() {
			sleeping_grue=false;
			switch(xcoor){
				case 0:
					switch(ycoor){
						case 0:
							if(firstTime[0]==1){
								score+=5;
								firstTime[0]--;
							}
							if(direction=="w")
								lock10w=false;
							message("You're outside! You see a taxi! You hail it over. You might even get yourself home before bedtime. Congratulations, you've escaped!");
							ndoor = 0;
							sdoor = 0;
							edoor = 1;
							wdoor = 0;
							shutdown()
							break;
						case 1:
							if(firstTime[1]==1){
								score+=5;
								firstTime[1]--;
							}
							message("You see a grue... looks like its sleeping.");
							sleeping_grue=true;
							ndoor = 0;
							sdoor = 0;
							edoor = 1;
							wdoor = 0;
							break;
						case 2:
							if(firstTime[2]==1){
								score+=5;
								firstTime[2]--;
							}
							message("Room 0,2");
							ndoor = 0;
							sdoor = 0;
							edoor = 0;
							wdoor = 0;
							break;
					}
					break;
				case 1:
					switch(ycoor){
						case 0:
							if(firstTime[3]==1){
								score+=5;
								firstTime[3]--;
							}
							message("There is a broken chandelier on top of a table. Looks like it fell. Also there is a door to the west.");
							if(lock10w==true){
								wdoor=2;
							}
							else
								wdoor=1;
							ndoor = 0;
							sdoor = 1;
							edoor = 0;
							break;
						case 1:
							message("You're back in the room you started in.");
							ndoor = 1;
							sdoor = 1;
							edoor = 1;
							wdoor = 1;
							break;
						case 2:
							if(firstTime[5]==1){
								score+=5;
								firstTime[5]--;
							}
							message("You walk into a spooky room. There are bodies hanging and a strange smelly ooze leaking from the walls.");
							if(keyRoom12==true){
								key++;
								keyRoom12 = false;
								message("You walk into a spooky room. There are bodies hanging and a strange smelly ooze leaking from the walls. Also you found a key!");
							}
							ndoor = 1;
							sdoor = 0;
							edoor = 0;
							wdoor = 0;
							
							break;
					}
					break;
				case 2:
					switch(ycoor){
						case 0:
							if(firstTime[6]==1){
								score+=5;
								firstTime[6]--;
							}
							message("Room 2,0");
							ndoor = 0;
							sdoor = 0;
							edoor = 0;
							wdoor = 0;
							break;
						case 1:
							message("You're in an empty room.");
							if(firstTime[7]==1){
								score+=5;
								firstTime[7]--;
								message("There is a man in this room. Oh my! He just disappeared in front of you! You're alone now.");
							}
							ndoor = 0;
							sdoor = 0;
							edoor = 0;
							wdoor = 1;
							break;
						case 2:
							if(firstTime[8]==1){
								score+=5;
								firstTime[8]--;
							}
							message("Room 2,2");
							ndoor = 0;
							sdoor = 0;
							edoor = 0;
							wdoor = 0;
							break;
					}
					break;
			}
			document.getElementById("score").innerHTML="Points: "+score;
		}
      </script>
   </head>
   <body>
      <h1>
          Little Dungeon
      </h1>

      <textarea rows="5" cols="32" id="taMain" name="taMain">You find yourself in what appears to be a castle dungeon, there are doors to the north, south, east and west. 
      </textarea>

      <br>

      <input type="button" id="btnN" name="btnN" value="Go North" onclick="btnN_click();">
	  <input type="button" id="btnS" name="btnS" value="Go South" onclick="btnS_click();">
	  <input type="button" id="btnE" name="btnE" value="Go East" onclick="btnE_click();">
	  <input type="button" id="btnW" name="btnW" value="Go West" onclick="btnW_click();">
	  <p id="score">Points: 0</p>
	  
	  
	  <p>
		Email me at <a href = "mailto:Clayton.Szelestey1@marist.edu">Clayton.Szelestey1@marist.edu</a>
	  </p>

   
   </body>
</html>